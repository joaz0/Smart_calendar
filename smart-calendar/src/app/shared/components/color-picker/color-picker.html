<div class="color-picker" role="radiogroup" aria-label="Seletor de cores">
  <div class="color-grid">
    <button *ngFor="let color of colors; trackBy: trackByColor"
            type="button"
            class="color-option"
            [class.selected]="selectedColor === color.value"
            [style.background-color]="color.value"
            [attr.aria-label]="color.name"
            [attr.aria-checked]="selectedColor === color.value"
            role="radio"
            (click)="selectColor(color.value)"
            (keydown.enter)="selectColor(color.value)"
            (keydown.space)="selectColor(color.value)">
      <mat-icon *ngIf="selectedColor === color.value" class="check-icon">check</mat-icon>
    </button>
  </div>
  
  <div class="custom-color-section" *ngIf="allowCustom">
    <mat-divider></mat-divider>
    <div class="custom-color-input">
      <mat-form-field appearance="outline">
        <mat-label>Cor personalizada</mat-label>
        <input matInput 
               type="color" 
               [(ngModel)]="customColor"
               (ngModelChange)="onCustomColorChange($event)"
               aria-label="Seletor de cor personalizada">
      </mat-form-field>
      <button mat-icon-button 
              (click)="selectColor(customColor)"
              [disabled]="!customColor"
              aria-label="Aplicar cor personalizada">
        <mat-icon>check</mat-icon>
      </button>
    </div>
  </div>
  
  <div class="recent-colors" *ngIf="recentColors.length > 0">
    <mat-divider></mat-divider>
    <h4>Cores recentes</h4>
    <div class="recent-colors-grid">
      <button *ngFor="let color of recentColors; trackBy: trackByColor"
              type="button"
              class="color-option recent"
              [class.selected]="selectedColor === color"
              [style.background-color]="color"
              [attr.aria-label]="'Cor recente: ' + color"
              (click)="selectColor(color)">
        <mat-icon *ngIf="selectedColor === color" class="check-icon">check</mat-icon>
      </button>
    </div>
  </div>
</div>
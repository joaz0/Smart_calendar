<div class="color-picker">
  <div class="color-display" (click)="togglePicker($event)">
    <div class="selected-color" [style.backgroundColor]="selectedColor"></div>
    <div class="color-value">{{ selectedColor }}</div>
    <div class="dropdown-arrow">{{ isPickerOpen ? '▴' : '▾' }}</div>
  </div>

  <div class="color-palette" *ngIf="isPickerOpen" (click)="$event.stopPropagation()">
    <div class="palette-section">
      <div class="section-title">Cores Principais</div>
      <div class="color-grid">
        <div 
          *ngFor="let color of primaryColors"
          class="color-option"
          [class.selected]="selectedColor === color"
          [style.backgroundColor]="color"
          (click)="selectColor(color, $event)"
        >
          <div class="checkmark" *ngIf="selectedColor === color">✓</div>
        </div>
      </div>
    </div>

    <div class="palette-section">
      <div class="section-title">Cores de Categoria</div>
      <div class="color-grid">
        <div 
          *ngFor="let color of categoryColors"
          class="color-option"
          [class.selected]="selectedColor === color"
          [style.backgroundColor]="color"
          (click)="selectColor(color, $event)"
        >
          <div class="checkmark" *ngIf="selectedColor === color">✓</div>
        </div>
      </div>
    </div>

    <div class="custom-color">
      <div class="section-title">Cor Personalizada</div>
      <div class="custom-controls">
        <input 
          placeholder="Escolha uma cor"
          type="color" 
          [value]="selectedColor"
          (input)="onCustomColorChange($event)"
          class="color-input"
        />
        <input 
          type="text" 
          [value]="selectedColor"
          placeholder="#000000"
          class="color-text"
          (input)="onColorTextChange($event)"
        />
      </div>
    </div>
  </div>
</div>
<div class="search-bar" data-component="SearchBar">
  <div class="search-container">
    <div class="search-icon" aria-hidden="true">🔍</div>
    <input
      #searchInput
      type="text"
      [(ngModel)]="searchText"
      placeholder="Buscar eventos, tarefas, contatos..."
      class="search-input"
      (input)="onSearch($event)"
      (focus)="onFocus()"
      (blur)="onBlur()"
      aria-label="Buscar"
    />
    <div class="search-actions">
      <button class="search-action" *ngIf="searchText" (click)="clearSearch()" aria-label="Limpar busca">×</button>
      <div class="search-shortcut" aria-hidden="true">⌘K</div>
    </div>
  </div>

  <!-- Search Results Dropdown -->
  <div class="search-results" *ngIf="showResults && searchText">
    <!-- Eventos -->
    <div class="search-section" *ngIf="eventResults.length > 0">
      <div class="section-title">Eventos</div>
      <div class="result-item" *ngFor="let event of eventResults" (click)="selectEvent(event)">
        <div class="result-icon">📅</div>
        <div class="result-content">
          <div class="result-title">{{ event.title }}</div>
          <div class="result-meta">{{ event.startDate | date:'dd/MM/yyyy HH:mm' }}</div>
        </div>
      </div>
    </div>

    <!-- Tarefas -->
    <div class="search-section" *ngIf="taskResults.length > 0">
      <div class="section-title">Tarefas</div>
      <div class="result-item" *ngFor="let task of taskResults" (click)="selectTask(task)">
        <div class="result-icon">✅</div>
        <div class="result-content">
          <div class="result-title">{{ task.title }}</div>
          <div class="result-meta">{{ task.category }}</div>
        </div>
      </div>
    </div>

    <!-- Nenhum resultado -->
    <div class="search-section" *ngIf="eventResults.length === 0 && taskResults.length === 0">
      <div class="no-results">Nenhum resultado encontrado</div>
    </div>

    <!-- Comandos -->
    <div class="search-section">
      <div class="section-title">Comandos</div>
      <div class="result-item" (click)="createEvent()">
        <div class="result-icon">➕</div>
        <div class="result-content">
          <div class="result-title">Criar Novo Evento</div>
          <div class="result-meta">Adicionar evento ao calendário</div>
        </div>
      </div>
      <div class="result-item" (click)="createTask()">
        <div class="result-icon">📝</div>
        <div class="result-content">
          <div class="result-title">Adicionar Tarefa</div>
          <div class="result-meta">Criar nova tarefa</div>
        </div>
      </div>
    </div>
  </div>
</div>

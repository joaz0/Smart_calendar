<aside class="sidebar" [class.collapsed]="!isOpen" [class.open]="isOpen" aria-label="Navegação principal">

  <!-- Header da Sidebar -->
  <header class="sidebar-header">
    <a routerLink="/" class="brand" [attr.aria-label]="'Ir para o início - ' + brandName">
      <img src="../../assets/images/logo.png" alt="Logo Smart Calendar" />
      <span class="brand-text">SmartCalendar</span>
    </a>

    <button class="toggle-btn"
            (click)="onToggleSidebar()"
            [attr.aria-label]="isOpen ? 'Recolher menu de navegação' : 'Expandir menu de navegação'"
            [attr.aria-expanded]="isOpen"
            type="button">
      <mat-icon>{{ isOpen ? 'menu_open' : 'menu' }}</mat-icon>
    </button>
  </header>

  <!-- Navegação Principal -->
  <nav class="sidebar-nav" role="navigation" aria-label="Navegação principal">

    <!-- === SEÇÃO 1: VISÃO GERAL === -->
    <section class="nav-section" aria-labelledby="section-overview">
      <h2 id="section-overview" class="section-label">Visão Geral</h2>
      <ul class="nav-list" role="list">
        <li role="listitem">
          <a routerLink="/dashboard.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Dashboard' : ''"
             matTooltipPosition="right"
             aria-label="Dashboard">
            <span class="nav-icon"><mat-icon>dashboard</mat-icon></span>
            <span class="nav-text">Dashboard</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/calendar.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Calendário' : ''"
             matTooltipPosition="right"
             aria-label="Calendário">
            <span class="nav-icon"><mat-icon>event</mat-icon></span>
            <span class="nav-text">Calendário</span>
            <span class="nav-badge" *ngIf="stats.todayEvents > 0" aria-label="{{stats.todayEvents}} eventos hoje">{{ stats.todayEvents }}</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- === SEÇÃO 2: GESTÃO DE TEMPO === -->
    <section class="nav-section" aria-labelledby="section-time-management">
      <h2 id="section-time-management" class="section-label">Gestão de Tempo</h2>
      <ul class="nav-list" role="list">
        <li role="listitem">
          <a routerLink="/agenda.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Minha Agenda' : ''"
             matTooltipPosition="right"
             aria-label="Minha Agenda">
            <span class="nav-icon"><mat-icon>view_agenda</mat-icon></span>
            <span class="nav-text">Minha Agenda</span>
          </a>
        </li>
        <li role="listitem">
          <a class="nav-item"
             routerLink="/app/tasks.html"
             routerLinkActive="active"
             [matTooltip]="!isOpen ? 'Tarefas' : ''"
             matTooltipPosition="right"
             aria-label="Tarefas">
            <span class="nav-icon"><mat-icon>task_alt</mat-icon></span>
            <span class="nav-text">Tarefas</span>
            <span class="nav-badge" *ngIf="stats.pendingTasks > 0" aria-label="{{stats.pendingTasks}} tarefas pendentes">{{ stats.pendingTasks }}</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- === SEÇÃO 3: EVENTOS E LEMBRETES === -->
    <section class="nav-section" aria-labelledby="section-events">
      <h2 id="section-events" class="section-label">Eventos & Lembretes</h2>
      <ul class="nav-list" role="list">
        <li role="listitem">
          <a routerLink="/events.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Meus Eventos' : ''"
             matTooltipPosition="right"
             aria-label="Meus Eventos">
            <span class="nav-icon"><mat-icon>event_available</mat-icon></span>
            <span class="nav-text">Meus Eventos</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/reminders.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Lembretes' : ''"
             matTooltipPosition="right"
             aria-label="Lembretes">
            <span class="nav-icon"><mat-icon>notifications</mat-icon></span>
            <span class="nav-text">Lembretes</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/alerts.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Alertas' : ''"
             matTooltipPosition="right"
             aria-label="Alertas">
            <span class="nav-icon"><mat-icon>notifications_active</mat-icon></span>
            <span class="nav-text">Alertas</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- === SEÇÃO 4: COLABORAÇÃO === -->
    <section class="nav-section" aria-labelledby="section-collaboration">
      <h2 id="section-collaboration" class="section-label">Colaboração</h2>
      <ul class="nav-list" role="list">
        <li role="listitem">
          <a routerLink="/community.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Comunidade' : ''"
             matTooltipPosition="right"
             aria-label="Comunidade">
            <span class="nav-icon"><mat-icon>groups</mat-icon></span>
            <span class="nav-text">Comunidade</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/relationships.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Relacionamentos' : ''"
             matTooltipPosition="right"
             aria-label="Relacionamentos">
            <span class="nav-icon"><mat-icon>person_add</mat-icon></span>
            <span class="nav-text">Relacionamentos</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/contacts.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Contatos' : ''"
             matTooltipPosition="right"
             aria-label="Contatos">
            <span class="nav-icon"><mat-icon>people</mat-icon></span>
            <span class="nav-text">Contatos</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- === SEÇÃO 5: ORGANIZAÇÃO === -->
    <section class="nav-section" aria-labelledby="section-organization">
      <h2 id="section-organization" class="section-label">Organização</h2>
      <ul class="nav-list" role="list">
        <li role="listitem">
          <a routerLink="/notes.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Notas' : ''"
             matTooltipPosition="right"
             aria-label="Notas">
            <span class="nav-icon"><mat-icon>note</mat-icon></span>
            <span class="nav-text">Notas</span>
            <span class="nav-badge" *ngIf="stats.pendingNotes > 0" aria-label="{{stats.pendingNotes}} notas pendentes">{{ stats.pendingNotes }}</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/projects.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Projetos' : ''"
             matTooltipPosition="right"
             aria-label="Projetos">
            <span class="nav-icon"><mat-icon>folder</mat-icon></span>
            <span class="nav-text">Projetos</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/tags.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Tags' : ''"
             matTooltipPosition="right"
             aria-label="Tags">
            <span class="nav-icon"><mat-icon>label</mat-icon></span>
            <span class="nav-text">Tags</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/categories.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Categorias' : ''"
             matTooltipPosition="right"
             aria-label="Categorias">
            <span class="nav-icon"><mat-icon>category</mat-icon></span>
            <span class="nav-text">Categorias</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- === SEÇÃO 6: ANALYTICS === -->
    <section class="nav-section" aria-labelledby="section-analytics">
      <h2 id="section-analytics" class="section-label">Analytics</h2>
      <ul class="nav-list" role="list">
        <li role="listitem">
          <a routerLink="/analytics.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Análises' : ''"
             matTooltipPosition="right"
             aria-label="Análises">
            <span class="nav-icon"><mat-icon>analytics</mat-icon></span>
            <span class="nav-text">Análises</span>
          </a>
        </li>
        <li role="listitem">
          <a routerLink="/reports.html"
             routerLinkActive="active"
             class="nav-item"
             [matTooltip]="!isOpen ? 'Relatórios' : ''"
             matTooltipPosition="right"
             aria-label="Relatórios">
            <span class="nav-icon"><mat-icon>assessment</mat-icon></span>
            <span class="nav-text">Relatórios</span>
          </a>
        </li>
      </ul>
    </section>

  </nav>

  <!-- Footer da Sidebar -->
  <footer class="sidebar-footer" *ngIf="isOpen" role="contentinfo">
    <div class="footer-content">
      <a routerLink="/settings.html"
         routerLinkActive="active"
         class="footer-item"
         [matTooltip]="!isOpen ? 'Configurações' : ''"
         matTooltipPosition="right"
         aria-label="Configurações">
        <mat-icon>settings</mat-icon>
        <span>Configurações</span>
      </a>

      <!-- Informações do Usuário (opcional) -->
      <div class="user-info" *ngIf="user">
        <img [src]="user.avatar" alt="{{user.name}}" class="user-avatar">
        <div class="user-details">
          <p class="user-name">{{user.name}}</p>
          <p class="user-role">{{user.role}}</p>
        </div>
      </div>
    </div>
  </footer>

</aside>

<!-- Overlay para mobile -->
<div class="sidebar-overlay"
     [class.active]="!isOpen"
     (click)="onToggleSidebar()"
     role="button"
     tabindex="0"
     [attr.aria-label]="'Fechar menu de navegação'">
</div>

<div class="confirm-dialog">
  <div class="dialog-header">
    <div class="dialog-icon" [class]="'icon-' + type">
      <mat-icon [class]="'icon-' + type">{{ getIcon() }}</mat-icon>
    </div>
    <h2 mat-dialog-title id="confirm-dialog-title">{{ title }}</h2>
  </div>

  <mat-dialog-content class="dialog-content">
    <div class="message-content">
      <p class="primary-message">{{ message }}</p>
      <p class="secondary-message" *ngIf="details">{{ details }}</p>

      <div class="warning-box" *ngIf="type === 'warning' || type === 'danger'">
        <mat-icon>warning</mat-icon>
        <span>Esta ação não pode ser desfeita</span>
      </div>

      <div class="info-list" *ngIf="additionalInfo && additionalInfo.length > 0">
        <h4>Informações adicionais:</h4>
        <ul>
          <li *ngFor="let info of additionalInfo">{{ info }}</li>
        </ul>
      </div>

      <div class="confirmation-input" *ngIf="requireConfirmation">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Digite "{{ confirmationText }}" para confirmar</mat-label>
          <input matInput
                 [(ngModel)]="userConfirmation"
                 (input)="onConfirmationInput()"
                 [placeholder]="confirmationText"
                 autocomplete="off">
          <mat-error *ngIf="showConfirmationError">
            Texto de confirmação não confere
          </mat-error>
        </mat-form-field>
      </div>

      <div class="checkbox-options" *ngIf="checkboxOptions && checkboxOptions.length > 0">
        <mat-checkbox *ngFor="let option of checkboxOptions; trackBy: trackByOption"
                     [(ngModel)]="option.checked"
                     [disabled]="option.disabled || false">
          {{ option.label }}
        </mat-checkbox>
      </div>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="dialog-actions">
    <button mat-button
            (click)="onCancel()"
            [disabled]="isProcessing"
            class="cancel-btn">
      {{ cancelText || 'Cancelar' }}
    </button>

    <button mat-raised-button
            [color]="getConfirmButtonColor()"
            (click)="onConfirm()"
            [disabled]="!canConfirm() || isProcessing"
            class="confirm-btn">
      <mat-spinner *ngIf="isProcessing" diameter="20"></mat-spinner>
      <mat-icon *ngIf="!isProcessing">{{ getConfirmIcon() }}</mat-icon>
      <span>{{ isProcessing ? 'Processando...' : (confirmText || 'Confirmar') }}</span>
    </button>
  </mat-dialog-actions>
</div>

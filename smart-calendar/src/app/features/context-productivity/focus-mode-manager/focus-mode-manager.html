<div class="focus-mode">
  <div class="focus-header">
    <h2>ğŸ”’ Modo Foco</h2>
    <div class="status-badge" [class.active]="isActive">
      {{isActive ? 'ğŸŸ¢ Ativo' : 'âšª Inativo'}}
    </div>
  </div>

  @if (!isActive) {
    <div class="activate-section">
      <div class="timer-selector">
        <label>DuraÃ§Ã£o:</label>
        <div class="duration-buttons">
          @for (duration of durations; track duration) {
            <button [class.selected]="selectedDuration === duration"
                    (click)="selectedDuration = duration">
              {{duration}} min
            </button>
          }
        </div>
      </div>

      <div class="block-settings">
        <h3>Bloquear durante o foco:</h3>
        <div class="block-list">
          <label>
            <input type="checkbox" [(ngModel)]="blockApps">
            <span>ğŸ“± Apps de mensagem</span>
          </label>
          <label>
            <input type="checkbox" [(ngModel)]="blockWebsites">
            <span>ğŸŒ Sites distractores</span>
          </label>
          <label>
            <input type="checkbox" [(ngModel)]="blockNotifications">
            <span>ğŸ”” NotificaÃ§Ãµes</span>
          </label>
        </div>
      </div>

      <button class="btn-activate" (click)="activate()">
        ğŸš€ Ativar Modo Foco
      </button>
    </div>
  } @else {
    <div class="active-session">
      <div class="timer-display">
        <div class="time-remaining">{{timeRemaining}}</div>
        <div class="progress-ring">
          <svg width="200" height="200">
            <circle cx="100" cy="100" r="90" 
                    stroke="#e0e0e0" 
                    stroke-width="10" 
                    fill="none"/>
            <circle cx="100" cy="100" r="90"
                    stroke="#4CAF50"
                    stroke-width="10"
                    fill="none"
                    [style.stroke-dasharray]="565"
                    [style.stroke-dashoffset]="progressOffset"/>
          </svg>
        </div>
      </div>

      <div class="blocked-items">
        <h3>Bloqueado:</h3>
        <div class="blocked-tags">
          @for (item of blockedItems; track item) {
            <span class="tag">{{item}}</span>
          }
        </div>
      </div>

      <button class="btn-deactivate" (click)="deactivate()">
        â¹ï¸ Encerrar Foco
      </button>
    </div>
  }
</div>

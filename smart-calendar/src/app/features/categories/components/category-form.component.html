<form [formGroup]="form" (ngSubmit)="onSubmit()" class="category-form">

  <div *ngIf="serverError" class="error-banner">
    {{ serverError }}
  </div>

  <div class="form-fields">
    <mat-form-field *ngFor="let field of formFields" class="form-field">

      <input
        *ngIf="field.type === 'text' || field.type === 'email' || field.type === 'password'"
        matInput
        [formControlName]="field.name"
        [placeholder]="field.placeholder"
        [type]="field.type"
        class="form-input">

      <textarea
        *ngIf="field.type === 'textarea'"
        matInput
        [formControlName]="field.name"
        [placeholder]="field.placeholder"
        [rows]="field.rows"
        class="form-textarea">
      </textarea>

      <mat-select
        *ngIf="field.type === 'select'"
        [formControlName]="field.name"
        class="form-select">
        <mat-option *ngFor="let option of field.options" [value]="option.value">
          {{ option.label }}
        </mat-option>
      </mat-select>

      <mat-error *ngIf="form.get(field.name)?.hasError('required')">
        {{ field.errorMessages?.required || 'Campo obrigat√≥rio' }}
      </mat-error>
    </mat-form-field>
  </div>

  <div class="form-actions">
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="!form.valid || isSubmitting">
      {{ isSubmitting ? 'Salvando...' : 'Salvar' }}
    </button>
    <button mat-button type="reset" (click)="resetForm()">
      Limpar
    </button>
  </div>
</form>

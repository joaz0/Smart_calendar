<div class="month-view-container">
  <!-- Month Header -->
  <div class="month-header">
    <div class="weekdays">
      <div class="weekday" *ngFor="let day of weekdays">
        {{ day }}
      </div>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-grid">
    <div class="calendar-week" *ngFor="let week of calendarWeeks">
      <div class="calendar-day" 
           *ngFor="let day of week"
           [class.other-month]="!day.isCurrentMonth"
           [class.today]="day.isToday"
           [class.selected]="day.isSelected"
           [class.has-events]="day.events.length > 0"
           (click)="selectDate(day.date)">
        
        <!-- Day Number -->
        <div class="day-number">
          {{ day.date.getDate() }}
        </div>

        <!-- Events -->
        <div class="day-events" *ngIf="day.events.length > 0">
          <div class="event-item" 
               *ngFor="let event of day.events | slice:0:maxEventsPerDay; trackBy: trackByEvent"
               [style.background-color]="event.category.color"
               [class.all-day]="event.allDay"
               (click)="onEventClick(event, $event)"
               [matTooltip]="getEventTooltip(event)">
            
            <div class="event-content">
              <span class="event-time" *ngIf="!event.allDay">
                {{ event.startTime | date:'shortTime' }}
              </span>
              <span class="event-title">{{ event.title }}</span>
            </div>
          </div>

          <!-- More Events Indicator -->
          <div class="more-events" 
               *ngIf="day.events.length > maxEventsPerDay"
               (click)="showMoreEvents(day, $event)">
            +{{ day.events.length - maxEventsPerDay }} mais
          </div>
        </div>

        <!-- Add Event Button -->
        <button class="add-event-btn" 
                *ngIf="day.isCurrentMonth"
                (click)="createEventOnDate(day.date, $event)"
                matTooltip="Adicionar evento">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Mini Calendar Navigation -->
  <div class="mini-nav" *ngIf="showMiniNav">
    <button mat-icon-button (click)="previousMonth()">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <span class="current-month">{{ currentMonthName }}</span>
    <button mat-icon-button (click)="nextMonth()">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
</div>
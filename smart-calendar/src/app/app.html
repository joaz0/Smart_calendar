<!-- Demo Mode Banner -->
@if (isDemo) {
  <div style="background: #ff9800; color: #000; text-align: center; padding: 4px; font-weight: bold; font-size: 12px;">
    ⚠️ MODO DEMONSTRAÇÃO - DADOS FICTÍCIOS
  </div>
}

<!-- App Container -->
<div class="app-container" [class.dark-theme]="isDarkTheme">
  <router-outlet></router-outlet>

  <!-- Global Loading Indicator -->
  @if (isGlobalLoading) {
    <div class="global-loading">
      <app-loading-spinner></app-loading-spinner>
    </div>
  }

  <!-- Toast Notifications -->
  @if (toastNotifications.length > 0) {
    <div class="toast-container"
      >
      @for (notification of toastNotifications; track trackByNotification($index, notification)) {
        <div class="toast-notification"
          [class]="'toast-' + notification.type"
          [@slideInOut]>
          <mat-icon class="toast-icon">{{ getNotificationIcon(notification.type) }}</mat-icon>
          <div class="toast-content">
            <div class="toast-title">{{ notification.title }}</div>
            <div class="toast-message">{{ notification.message }}</div>
          </div>
          <button mat-icon-button
            (click)="dismissNotification(notification.id)"
            class="toast-close">
            <mat-icon>close</mat-icon>
          </button>
        </div>
      }
    </div>
  }

  <!-- PWA Update Available -->
  @if (showPwaUpdate) {
    <div class="pwa-update-banner"
      [@slideInOut]>
      <div class="update-content">
        <mat-icon>system_update</mat-icon>
        <span>Nova versão disponível!</span>
      </div>
      <div class="update-actions">
        <button mat-button (click)="dismissPwaUpdate()">Depois</button>
        <button mat-raised-button color="primary" (click)="updatePwa()">Atualizar</button>
      </div>
    </div>
  }

  <!-- Offline Indicator -->
  @if (!isOnline) {
    <div class="offline-indicator"
      [@slideInOut]>
      <mat-icon>cloud_off</mat-icon>
      <span>Você está offline. Algumas funcionalidades podem estar limitadas.</span>
    </div>
  }
</div>

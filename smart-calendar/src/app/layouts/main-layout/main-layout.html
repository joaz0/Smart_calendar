<div class="main-layout" [class.sidebar-collapsed]="!sidebarOpen">
  <!-- Sidebar -->
  <aside class="sidebar-container">
    <app-sidebar
      [isOpen]="sidebarOpen"
      [stats]="userStats"
      [user]="currentUser"
      (toggleSidebar)="toggleSidebar()">
    </app-sidebar>
  </aside>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Header -->
    <header class="main-header">
      <app-header
        [user]="currentUser"
        [sidebarOpen]="sidebarOpen"
        (sidebarToggle)="toggleSidebar()"
        (themeToggle)="toggleTheme()"
        (profileClick)="openProfile()"
        (notificationClick)="openNotifications()">
      </app-header>
    </header>

    <!-- Content -->
    <main class="content-area">
      <router-outlet></router-outlet>
    </main>
  </div>

  <!-- Loading Overlay -->
  @if (isLoading) {
    <div class="loading-overlay">
      <app-loading-spinner></app-loading-spinner>
    </div>
  }

  <!-- Mobile Sidebar Backdrop -->
  @if (sidebarOpen && isMobile) {
    <div class="sidebar-backdrop"
      (click)="closeSidebar()" (keydown.enter)="closeSidebar()" (keydown.space)="closeSidebar()" tabindex="0" role="button">
    </div>
  }
</div>

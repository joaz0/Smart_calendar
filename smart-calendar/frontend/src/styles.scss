// 1. Configuração do Angular Material Customizado + Design System
@use '@angular/material' as mat;
@use '@angular/material/core/m2' as matm;
@use 'assets/styles/tokens'; // Carrega as variáveis CSS oficiais
@use 'assets/styles/variables';
@use 'assets/styles/contrast-improvements';

// Defina sua paleta baseada no seu Roxo (#5b0bdc)
$custom-purple-palette: (
  50: var(--primary-50),
  100: #e1bee7,
  200: #ce93d8,
  300: #ba68c8,
  400: #ab47bc,
  500: #5b0bdc,
  600: #5309c9,
  700: #4908b5,
  800: #4006a2,
  900: #300380,
  A100: #b388ff,
  A200: #7c4dff,
  A400: #651fff,
  A700: #6200ea,
  contrast: (
    50: rgba(0, 0, 0, 0.87),
    100: rgba(0, 0, 0, 0.87),
    200: rgba(0, 0, 0, 0.87),
    300: #ffffff,
    400: #ffffff,
    500: #ffffff,
    600: #ffffff,
    700: #ffffff,
    800: #ffffff,
    900: #ffffff,
    A100: rgba(0, 0, 0, 0.87),
    A200: #ffffff,
    A400: #ffffff,
    A700: #ffffff,
  )
);

// Configure as cores do tema usando sua paleta
$my-primary: matm.define-palette($custom-purple-palette, 500);
$my-accent: matm.define-palette(matm.$pink-palette, A200, A100, A400);
$my-warn: matm.define-palette(matm.$red-palette);

// Cria o tema Dark
$my-theme: matm.define-dark-theme((
  color: (
    primary: $my-primary,
    accent: $my-accent,
    warn: $my-warn,
  ),
  typography: matm.define-typography-config(),
  density: 0
));

@include mat.core();
@include mat.all-component-themes($my-theme);

// 2. Estilos Globais
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  background-color: var(--bg-primary);
}

body {
  font-family: 'Roboto', 'Helvetica Neue', sans-serif;
  color: var(--text-primary); // Agora usa a cor com opacidade do token
  background: var(--gradient-primary); // Usa o gradiente do token
  background-attachment: fixed;
}

[data-theme='light'] body {
  background: var(--gradient-primary);
  color: var(--text-primary);
}

// Estilo para o Material
.mat-mdc-form-field {
  width: 100%;
}

.mat-mdc-button, .mat-mdc-raised-button {
  font-weight: 500;
  letter-spacing: 0.5px;
}

// Cards customizados
.mat-mdc-card {
  border-radius: 12px;
  background: var(--gradient-card) !important;
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 2px solid rgba(91, 11, 220, 0.3);
  box-shadow: 
    0 4px 12px rgba(91, 11, 220, 0.3),
    0 0 30px rgba(91, 11, 220, 0.1),
    inset 0 1px 1px rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent,
      rgba(255, 255, 255, 0.05),
      transparent
    );
    transition: left 0.5s;
  }

  &:hover {
    box-shadow: 
      0 6px 20px rgba(91, 11, 220, 0.5),
      0 0 50px rgba(91, 11, 220, 0.2),
      inset 0 1px 1px rgba(255, 255, 255, 0.15);
    border-color: rgba(91, 11, 220, 0.5);
    transform: translateY(-2px);

    &::before {
      left: 100%;
    }
  }
}

// Toolbar customizada
.mat-toolbar {
  background: var(--gradient-primary);
  color: white;
  box-shadow: 0 2px 8px rgba(91, 11, 220, 0.4);
}

// Scrollbar customizada
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--surface-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--gradient-button);
  border-radius: 4px;

  &:hover {
    background: var(--gradient-primary);
  }
}
